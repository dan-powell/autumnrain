# Gulp Tasks
# ------------------------
# Tasks are grouped by usage
# Each task group contains an array of tasks
# Each of these tasks must have a name, source and destination

tasks:

    # Process Main APP LESS files
    less_main:
        -
            name: "Main CSS"
            src:
                - "./resources/styles/main/variables.less"
                - "./resources/styles/main/elements.less"
                - "./resources/styles/main/base.less"
                - "./resources/styles/main/mixins.less"
                - "./resources/styles/main/utilities.less"
                - "./resources/styles/main/**/*.less"
            destFolder: "./public/css"
            dest: "main.css"
        -
            name: "Sidebar CSS"
            src:
                - "./resources/styles/sidebar/**/*.less"
            destFolder: "./public/css"
            dest: "sidebar.css"

    less_plugins:
        # -
        #     name: "Plugin CSS"
        #     src:
        #         - "./resources/styles/main/plugins.less"
        #     destFolder: "./public/css"
        #     dest: "plugins.css"

    # Concatenate & minify app JS files
    js_main:
        -
            name: "Public JS"
            src:
                - "./resources/scripts/vendor/classie.js"
                - "./resources/scripts/public/sidebar.js"
                - "./resources/scripts/public/base.js"
            destFolder: "./public/js"
            dest: "public.js"
        -
            name: "Sidebar JS"
            src:
                - "./node_modules/animejs/lib/anime.min.js"
                - "./resources/scripts/overlay.js"
                - "./resources/views/sidebar/sidebar.js"
            destFolder: "./public/js"
            dest: "sidebar.js"

    # Concatenate & minify plugin JS files
    js_plugins:
        -
            name: "Sidebar JS"
            src:
                - "./resourcees"
                - "./bower_components/imagesloaded/imagesloaded.pkgd.js"
                - "./resources/scripts/public/portfolio.js"
            destFolder: "./public/js"
            dest: "portfolio.js"
        -
            name: "Portfolio JS"
            src:
                - "./bower_components/isotope/dist/isotope.pkgd.min.js"
                - "./bower_components/imagesloaded/imagesloaded.pkgd.js"
                - "./resources/scripts/public/portfolio.js"
            destFolder: "./public/js"
            dest: "portfolio.js"
        -
            name: "Bootstrap JS"
            src:
                - "./bower_components/bootstrap/js/modal.js"
                - "./bower_components/ekko-lightbox/dist/ekko-lightbox.min.js"
            destFolder: "./public/js"
            dest: "bootstrap.js"

    # Copy files from one location to another (Handy for publishing bower components)
    copy:
        -
            name: "JS Vendor Plugins"
            src:
                - "./bower_components/jquery/dist/jquery.min.js"
                - "./bower_components/jquery/dist/jquery.min.map"
                - "./bower_components/jquery.lazyload/jquery.lazyload.js"
            dest: "./public/js/vendor"

        -
            name: "Fonts"
            src:
                - "./bower_components/fontawesome/fonts/**"
            dest: "./public/fonts"

    # Basic cachebusting for static asset URLS
    cachebust:
        -   name: "Views"
            src:
                - "./resources/views/public/public.blade.php"
            dest: "./resources/views/public/public.blade.php"


# Gulp watch locations
# ------------------------

watch:
    -
        # LESS files
        files:
            - "./resources/styles/**/*.less"
            - "./resources/views/**/*.less"
        tasks:
            - "less-main"

    -
        # JS Files
        # Note that for speed we don't run the js_plugins task
        files:
            - "./resources/scripts/**/*.js"
            - "./resources/views/**/*.js"
        tasks:
            - "js-main"
    -
        # JS Files
        files:
            - "./resources/views/**/*.html"
            - "./resources/views/**/*.php"
        tasks:
            - "reload"

config:
    # Default plugin configs - Avoid touching unless you have to
    postCssPlugins:
        -
            name: 'autoprefixer'
            options:
                #browsers: ['last 2 version', 'IE 7']
                #cascade: true
        -
            name: 'cssnano'
            options:
                zindex: false

    uglify:
        mangle: false
        compress: true

    revEasy:
        revType: 'date'
